---
title: "Data_Viz Written Report"
author: "Kirill Perfiliev, Stuart Gavidia, Andrew Sandoval"
date: "`r Sys.Date()`"
output: html_document
---

```{r, warning=FALSE, message=FALSE}
library(dplyr)
library(countrycode)
library(ggplot2)
library(knitr)

```


1.Sasakitetsuya, T. (2022, February 23). Top 20 defense budget countries analysis. Kaggle.
  a. https://www.kaggle.com/code/sasakitetsuya/top-20-defense-budget-countries-analysis 

2. Initial Graph

```{r, echo=FALSE}
knitr::include_graphics("C:\\Users\\kiril\\OneDrive\\Desktop\\huh\\School\\Math_348\\Data_Viz\\init_graph.png")

```


3. The primary purpose of the author appears to have been to show the correlations between different aspects of the military. The author used a reddish color and darkness to show the strength of correlations and it was effective in making some of the correlations stand out from the rest. The scale on the right hand side of the graph also clarified the color meaning of each box. However, it did not help the author's purpose and it did not help the reader understand the author's purpose either. The graph is cluttered with too many variables which makes the graph difficult to read. Also, there is far too much non-data ink which is distracting for the reader. Finally, there is no title making the graph less presentable.


4. The original graph had too much data on it, making it very hard to read and understand it. The viewer would have to spend some time looking at it, in order to understand the story its trying to tell. Additionally, we specifically decided to focus on only on 5 variables (country, active personnel, defense budget, waterways usable, and air power). We were very interested in the results of how much the country relies on the use of air power (total air) based on their access to water. We did this while including the defense budget based on active personnel.  In other words, our thought was the more access to water a country has, the less it is dependent to air because it can use ground, water, and air transportation - the spread of resources is equal. 



5. Our data that we are working with
```{r}
#read the whole data
data <- read.csv("C:\\Users\\kiril\\OneDrive\\Desktop\\huh\\School\\Math_348\\Data_Viz\\global_firepower_2022_wide.csv")

#create a table with the specific variables
project_data <- select(data, country, Active.Personnel, Defense.Budget, Waterways..usable., Attack.Helicopters, 
                       Fighters.Interceptors, Helicopters, Total.Aircraft.Strength)

#ensure the data has no nulls
project_data1 <- na.omit(project_data)

#it seems that Total.Aircraft.Strength = Fighters.Interceptors, so get rid off the one column
project_data2 <- project_data1[, -8]


#combining all of the air values together into a new column
project_data3 <- project_data2 %>%
  mutate(air_power = Attack.Helicopters + Fighters.Interceptors + Helicopters)

#working data with the main variables
project_data4 <- select(project_data3, country, Active.Personnel, Defense.Budget, Waterways..usable., air_power)

#add continent column
project_data4$continent <- countrycode(sourcevar = project_data4[, "country"],
                            origin = "country.name",
                            destination = "continent")

project_data5 <- project_data4[order(-project_data4$air_power),]



dim(project_data5)
kable(head(project_data5), caption = "Head of project_data5")
kable(tail(project_data5), caption = "Tail of project_data5")


```

analysis of the graph


## Final Graph

6.7.8. Our final graph;Comments about the code for the Graph; Caption

```{r}

```


9. 



## Discussion
11. We dicided to create a scatterplot graph that has the size of the bubles based on the defense budget related to the active personnel. It was hard to make the graph that represents all of that. 

We originally had this graph that was not scaled based on log function. The reason why we decided to change it is because a bunch of points are just so compiled and you couldn't see the data well.

```{r}
#Create the bubble graph from the data
ggplot(data = project_data4, aes(x = Waterways..usable., y = air_power, size = Active.Personnel, color = continent)) +
  geom_point(alpha = 0.3) +
  geom_smooth(data = project_data4, method = "lm", se = FALSE, aes(group = 1)) +
  labs(title = "Title",
       x = "Available Waterways",
       y = "Total Air Power",
       color = "Continents") +
  guides(size = FALSE) +
  theme_minimal()

```


Additionally, we ended up going through with our original question of the story we are trying to tell. However, the resutlts we received are completely the oposite from our original thought.

```{r}
knitr::include_graphics("C:\\Users\\kiril\\OneDrive\\Desktop\\huh\\School\\Math_348\\Data_Viz\\sketch_graph.jpg")


```


The most difficult part of the project was producing the graph and making it readable to the viewer. However, thank you to Jillian and Cole for their valuable feedback for our graph.

Jillian: mentioned how our graph had a lot on the graph but it was not very well pointed out. For example, she noticed how we didn't have description of the difference size of the size of the dots, and how the x and y axis titles were not bolded making it harder to notice them. Furthermore, she said how the colors are too closely alike, meaning we should choose different colors. Finally, she mentioned to add units. 



Cole: different colors seem cool, lots of countries with no water ways. Countries with more waterways have more airpower. Need a key for what the sizes of circles mean to clarify. Great work using alpha to make the dots see through in order not to block countries! I would recommend adding a clarification for what the sizes of the circles mean, along with a title for the graphic. Overall, great work keeping it simple and not creating any chart junk!

















