---
title: "Data_Viz Written Report"
author: "Kirill Perfiliev, Stuart Gavidia, Andrew Sandoval"
date: "`r Sys.Date()`"
output: html_document
---

```{r, warning=FALSE, message=FALSE}
library(dplyr)
library(countrycode)
library(ggplot2)
library(knitr)

```


1.Sasakitetsuya, T. (2022, February 23). Top 20 defense budget countries analysis. Kaggle.
  a. https://www.kaggle.com/code/sasakitetsuya/top-20-defense-budget-countries-analysis 

2. Initial Graph

```{r, echo=FALSE}
knitr::include_graphics("C:\\Users\\kiril\\OneDrive\\Desktop\\huh\\School\\Math_348\\Data_Viz\\init_graph.png")

```


3. The primary purpose of the author appears to have been to show the correlations between different aspects of the military. The author used a reddish color and darkness to show the strength of correlations and it was effective in making some of the correlations stand out from the rest. The scale on the right hand side of the graph also clarified the color meaning of each box. However, it did not help the author's purpose and it did not help the reader understand the author's purpose either. The graph is cluttered with too many variables which makes the graph difficult to read. Also, there is far too much non-data ink which is distracting for the reader. Finally, there is no title making the graph less presentable.


4. The original graph had too much data on it, making it very hard to read and understand it. The viewer would have to spend some time looking at it, in order to understand the story its trying to tell. Additionally, we specifically decided to focus on only on 5 variables (country, active personnel, defense budget, waterways usable, and air power). We were very interested in the results of how much the country relies on the use of air power (total air) based on their access to water. We did this while including the defense budget based on active personnel.  In other words, our thought was the more access to water a country has, the less it is dependent to air because it can use ground, water, and air transportation - the spread of resources is equal. 



5. Our data that we are working with
```{r}
#read the whole data
data <- read.csv("C:\\Users\\kiril\\OneDrive\\Desktop\\huh\\School\\Math_348\\Data_Viz\\global_firepower_2022_wide.csv")

#create a table with the specific variables
project_data <- select(data, country, Active.Personnel, Defense.Budget, Waterways..usable., Attack.Helicopters, 
                       Fighters.Interceptors, Helicopters, Total.Aircraft.Strength)

#ensure the data has no nulls
project_data1 <- na.omit(project_data)

#it seems that Total.Aircraft.Strength = Fighters.Interceptors, so get rid off the one column
project_data2 <- project_data1[, -8]


#combining all of the air values together into a new column
project_data3 <- project_data2 %>%
  mutate(air_power = Attack.Helicopters + Fighters.Interceptors + Helicopters)

#working data with the main variables
project_data4 <- select(project_data3, country, Active.Personnel, Defense.Budget, Waterways..usable., air_power)

#add continent column
project_data4$continent <- countrycode(sourcevar = project_data4[, "country"],
                            origin = "country.name",
                            destination = "continent")

project_data5 <- project_data4[order(-project_data4$air_power),]



dim(project_data5)
kable(head(project_data5), caption = "Head of project_data5")
kable(tail(project_data5), caption = "Tail of project_data5")


```

## Final Graph

6.7.8. Our final graph;Comments about the code for the Graph; Caption

```{r}

```


9. Our graph stands out as an exemplary representation of data through its adherence to key data visualization principles, which significantly enhanced its clarity and analytical depth. By prioritizing the data ink ratio, as advocated by Tufte in "The Visual Display of Quantitative Information" (Chapter 4), we ensured the majority of ink visually represents the data, with minimal and purposeful use of non-data ink for elements like a succinct legend and the minimalist theme design, to reduce visual clutter and focus attention on the data itself. This graph also aligned with the area principle from Sharpe's "Business Statistics" (Chapter 4), where the size of each dot accurately reflected the magnitude of each country's defense budget, correcting previous representations' lack of quantitative precision. Our decision to use a logarithmic scale for displaying total air power and available waterways, followed the scale selection advice in Sharpe's "Business Statistics" (Chapter 5). We ensured that we chose an appropriate scale to give the reader a better picture of our data and the variables' correlation. Again in Sharpe's "Business Statistics" (Chapter 5) we made sure to conduct research into any possible outliers. We identified three possible outliers but upon further research indentified them to be the USA, China, and Russia. These were global superpowers and to make sure our graph wasn't being stretched out from these outliers, we opted for the logarithmic scale. This meticulous application of data visualization principles not only enhances the work's credibility but also enriches the viewer's understanding, making our graph a superior tool for conveying complex information.

## Discussion
11. We decided to create a scatter plot graph that has the size of the bubbles based on the defense budget related to the active personnel. It was hard to make the graph that represents all of that. 

We originally had this graph that was not scaled based on log function. The reason why we decided to change it is because a bunch of points are just so compiled and you couldn't see the data well.

```{r}
#Create the bubble graph from the data
ggplot(data = project_data4, aes(x = Waterways..usable., y = air_power, size = Active.Personnel, color = continent)) +
  geom_point(alpha = 0.3) +
  geom_smooth(data = project_data4, method = "lm", se = FALSE, aes(group = 1)) +
  labs(title = "Title",
       x = "Available Waterways",
       y = "Total Air Power",
       color = "Continents") +
  guides(size = FALSE) +
  theme_minimal()

```

Additionally, we ended up going through with our original question of the story we are trying to tell. However, the resutlts we received are completely the oposite from our original thought.

```{r}
knitr::include_graphics("C:\\Users\\kiril\\OneDrive\\Desktop\\huh\\School\\Math_348\\Data_Viz\\sketch_graph.jpg")


```

The most difficult part of the project was producing the graph and making it readable to the viewer. However, thank you to Jillian and Cole for their valuable feedback for our graph.

Jillian Feedback:
Jillian highlighted the need for clarity in our graph, pointing out missing elements such as a legend for dot sizes and bolded axis titles for better visibility. She also suggested using more distinct colors to improve differentiation and adding units to quantify the data clearly.

Cole Feedback:
Cole appreciated the graph's aesthetics and transparency feature, noting a correlation between waterways and airpower. He recommended including a key for the circle sizes to clarify their meaning and praised the simplicity and cleanliness of the design, suggesting only the addition of a title for completeness.




